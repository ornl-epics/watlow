####  Macro Definitions  ####
# (s) - Beam Line
# (ta) - Target Area
# (ss) - Device Name
# (i)	- Channel or Index
# (CMA)	- Control Mode Active
# (hPr)	- Heat Power
# (CPr)	- Cool Power
# (PvA)	- Filtered Process Value
# (CLS)	- Read Closed Loop Setpoint
# (AtS)	- Autotune Status


#=========== Monitor Menu ===========

# Heat Power
record(ai, "$(s):$(ta):$(ss):$(mod):HeatPower$(ch)") 
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynFloat64")
	field(INP,	"@asyn(watlow_Mon_Num_1.$(mod),$(hPr=0),100)FLOAT32_BE")
	field(EGU,	"%")
	field(PREC,	"1")
	field(ADEL,	"1")
	field(MDEL,	"1")
}

# Cool Power
record(ai, "$(s):$(ta):$(ss):$(mod):CoolPower$(ch)") 
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynFloat64")
	field(INP,	"@asyn(watlow_Mon_Num_1.$(mod),$(CPr=2),100)FLOAT32_BE")
	field(EGU,	"%")
	field(PREC,	"1")
	field(ADEL,	"1")
	field(MDEL,	"1")
}

# Filtered Process Value
record(ai, "$(s):$(ta):$(ss):$(mod):ProcessValue$(ch)") 
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynFloat64")
	field(INP,	"@asyn(watlow_An_Enum_1.$(mod),$(PvA=42),100)FLOAT32_BE")
	field(EGU,	"°")
	field(PREC,	"3")
	field(ADEL,	"0.1")
	field(MDEL,	"0.1")
}

# Control Mode Active
record(mbbi, "$(s):$(ta):$(ss):$(mod):ControlModeActive$(ch)") 
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynUInt32Digital")
	field(INP,	"@asynMask(watlow_Mon_Enum_1.$(mod),$(CMA=0),0xFF,100)UINT16")
	field(ZRST,	"Off")
	field(ZRVL,	"62")
	field(ONST,	"Auto")
	field(ONVL,	"10")
	field(TWST,	"Manual")
	field(TWVL,	"54")
}

# Read Closed Loop Setpoint. Same as Set Point Active
record(ai, "$(s):$(ta):$(ss):$(mod):ReadClosedLoopSV$(ch)")
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynFloat64")
	field(INP,	"@asyn(watlow_Mon_Enum_2.$(mod),$(CLS=0),100)FLOAT32_BE")
	field(EGU,	"°")
	field(PREC,	"3")
	field(ADEL,	"0.1")
	field(MDEL,	"0.1")
}

# Autotune Status
record(mbbi, "$(s):$(ta):$(ss):$(mod):AutotuneStatus$(ch)") 
{
	field(SCAN,	"I/O Intr")
	field(PINI,	"YES")
	field(DTYP,	"asynUInt32Digital")
	field(INP,	"@asynMask(watlow_CL_Enum_1.$(mod),$(AtS=4),0xFF,100)UINT16")
	field(ZRST,	"Off")
	field(ZRVL,	"62")
	field(ONST,	"Waiting: cross 1 positive")
	field(ONVL,	"119")
	field(TWST,	"Waiting: cross 1 negative")
	field(TWVL,	"120")
	field(THST,	"Waiting: cross 2 positive")
	field(THVL,	"121")
	field(FRST,	"Waiting: cross 2 negative")
	field(FRVL,	"122")
	field(FVST,	"Waiting: cross 3 positive")
	field(FVVL,	"123")
	field(SXST,	"Waiting: cross 3 negative")
	field(SXVL,	"150")
	field(SVST,	"Measuring maximum peak")
	field(SVVL,	"151")
	field(EIST,	"Measuring minimum peak")
	field(EIVL,	"152")
	field(NIST,	"Calculating")
	field(NIVL,	"153")
	field(TEST,	"Complete")
	field(TEVL,	"18")
	field(ELST,	"Timeout")
	field(ELVL,	"118")
}
